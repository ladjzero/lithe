<!DOCTYPE html>
<html lang="en" xmlns:wb="http://open.weibo.com/wb">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
    <title>Lithe</title>
    <link href="css/base.css" rel="stylesheet"/>
    <link href="css/default-theme.css" rel="stylesheet"/>
    <link href="css/blueimp-gallery.css" rel="stylesheet"/>
    <script data-main="js/dev/main" src="js/dev/lib/require.js"></script>
</head>
<body class="unstyled">
<script type="text/html" id="weibo-body-template">
    <div class="weibo-header" data-bind="if: !$data.deleted">
        <div class="user">
            <a class="weibo-user-name" data-bind="attr: {href: 'weibo.com' + user.url}">
                <img class="weibo-avatar img-rounded" data-bind="attr: {src: user.avatar_hd}"/>
                <span data-bind="text: user.screen_name"></span>
            </a>
        </div>
    </div>
    <p class="weibo-text" data-bind="text: text"></p>
    <div class="blueimp-gallery blueimp-gallery-carousel no-shadow" data-bind="if: !$data.deleted, gallery: $data.pic_urls"></div>
    <div class="weibo-operations" data-bind="if: !$data.deleted">
        <a class="btn btn-default" href="#" data-bind="click: $root.onSave">收藏</a>
        <a class="btn btn-default" href="#" data-bind="click: $root.onRepo">转发<span data-bind="text: reposts_count || ''"></span></a>
        <a class="btn btn-default" href="#" data-bind="click: $root.onComment">评论<span data-bind="text: comments_count || ''"></span></a>
        <a class="btn btn-default" href="#" data-bind="click: $root.onLike">赞<span data-bind="text: attitudes_count || ''"></span></a>
    </div>
    <div class="comments" data-bind="if: $data.comments && $data.comments().length">
        <ul class="unstyled" data-bind="foreach: comments">
            <li><a href="#" data-bind="text: user && user.name"></a>: <span data-bind="text: text"></span></li>
        </ul>

    </div>
    <div data-bind="if: $data.retweeted_status">
        <div class="nested-weibo"
             data-bind="template: {name: 'weibo-body-template', data: $data.retweeted_status}"></div>
    </div>
</script>

<script type="text/html" id="weibo-template">
    <li class="weibo-container" data-bind="template: {name: 'weibo-body-template', data: status}, attr: {id: 'wb' + id}"></li>
</script>

<nav>
    <span id="progress" data-bind="style: {width: width}"></span>
    <a id="home" href="#">Lithe</a>
</nav>
<div id="main-container">
    <ul id="weibos" class="unstyled"
        data-bind="template: {name: 'weibo-template', foreach: statuses, as: 'status'}"></ul>
    <button id="load-more" class="unstyled">加载更多</button>

</div>
</div>
</body>
</html>